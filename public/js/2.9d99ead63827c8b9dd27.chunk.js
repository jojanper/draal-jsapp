webpackJsonp([2],{660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(7),o=n(19),r=n(303),s=n(673),d=n(697),c=n(700),p=n(701),l=[{path:"",component:r.AppEmptyViewComponent,children:[c.STARWARSROUTE,p.WORLDBANKROUTE]}],u=function(){function e(){}return e=__decorate([i.NgModule({imports:[a.CommonModule,r.DraalDataTableModule,r.DraalWidgetsCoreModule,o.RouterModule.forChild(l)],providers:[s.StarWarsApiService,d.WorldBankRestApi],declarations:[s.PlanetsComponent,s.SpeciesDetailComponent,d.CountriesComponent]})],e)}();t.DraalAppPagesApiModule=u},669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(693))},673:function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(692)),i(n(695)),i(n(669))},674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(675),o=n(698),r=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t=__decorate([i.Component({selector:"dng-wb.countries",template:n(699)}),__metadata("design:paramtypes",[a.WorldBankRestApi])],t)}(o.WorldBankBaseComponent);t.CountriesComponent=r},675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(26),o=function(){function e(e){this.network=e,this.connectionOptions=new a.ConnectionOptions,this.connectionOptions.cors=!0}return e.prototype.getData=function(e,t,n,i){var a={};e&&(a.page=Math.floor(n.start/n.length)+1,a.per_page=n.length),this.connectionOptions.params=Object.assign({},a,{format:"json"});var o="https://api.worldbank.org/v2/"+t;this.network.get(o,this.connectionOptions).subscribe(function(t){var a={data:t[1]};e&&(a.draw=n.draw,a.recordsTotal=t[0].total,a.recordsFiltered=t[0].total),i(a)})},e=__decorate([i.Injectable(),__metadata("design:paramtypes",[a.NetworkService])],e)}();t.WorldBankRestApi=o},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(48),o=n(669),r=n(303),s=function(){function e(e,t,n){this.api=e,this.resolver=t,this.injector=n}return e.prototype.ngOnInit=function(){this.renderPlanetsFn=this.renderPlanets.bind(this),this.observable=this.api.getData()},e.prototype.renderPlanets=function(e){return this[e.target+"Render"](e.row)},e.prototype.speciesRender=function(e){var t=e.species.map(function(e){return{link:[a.RouteManager.resolveByName("species-view"),e.id],text:e.name}});return r.getComponentHtml(this.resolver,this.injector,r.RouteComponent,t)},e=__decorate([i.Component({selector:"dng-planet",template:n(694)}),__metadata("design:paramtypes",[o.StarWarsApiService,i.ComponentFactoryResolver,i.Injector])],e)}();t.PlanetsComponent=s},693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(49),o=n(303),r=n(26),s="https://swapi.co/api/planets/",d="https://swapi.co/api/species/",c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.AppObservableArray);t.PlanetsObservable=c;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.AppObservableArray);t.SpeciesObservable=p;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.AppObservableArray);t.AppPlanetsObservable=l;var u=function(){function e(e){var t=this;this.network=e,this.connectionOptions=new r.ConnectionOptions,this.connectionOptions.cors=!0,this.planets=new c,this.species=new p,this.appPlanets=new l(o.AppObservableArrayModes.PERSISTENT),this.fetch(s,"planets"),this.fetch(d,"species"),a.Observable.forkJoin(this.getPlanets(),this.getSpieces()).subscribe(function(e){var n=e[0],i=e[1];t.appPlanets.addSubjects(t.joinPlanetsSpecies(n,i))})}return e.prototype.joinPlanetsSpecies=function(e,t){return e.map(function(e){var n=e;return n.species=[],t.forEach(function(t){if(e.url===t.homeworld){var i=t.url.split("/"),a=t;t.id=i[i.length-2],n.species.push(a)}}),n})},e.prototype.fetch=function(e,t){var n=this;this.network.get(e,this.connectionOptions).subscribe(function(e){var i=e;n[t].push(i.results),i.next?n.fetch(i.next,t):(n[t].next(),n[t].complete())})},e.prototype.getPlanets=function(){return this.planets.observable},e.prototype.getSpieces=function(){return this.species.observable},e.prototype.getData=function(){return this.appPlanets.observable},e.prototype.getSpeciesDetail=function(e){var t=this;return this.network.get(d+e+"/",this.connectionOptions).flatMap(function(e){var n=e;return t.network.get(n.homeworld,t.connectionOptions).map(function(e){return n.planet=e,n})})},e=__decorate([i.Injectable(),__metadata("design:paramtypes",[r.NetworkService])],e)}();t.StarWarsApiService=u},694:function(e,t){e.exports='<div class="container">\n    <ng-template #loading>\n        <dng-spinner scale=0.5 type="spinner-2" class="justify-content">\n            <div class="text-center">Loading planets...</div>\n        </dng-spinner>\n    </ng-template>\n\n    <div *ngIf="observable | async as data; else loading">\n        <dng-dt [tableData]="data" [dtRender]="renderPlanetsFn">\n            <div dngDtColumnDirective dt-data="name" dt-title="Name"></div>\n            <div dngDtColumnDirective dt-data="rotation_period" dt-title="Rotation period"></div>\n            <div dngDtColumnDirective dt-data="diameter" dt-title="Diameter"></div>\n            <div dngDtColumnDirective dt-data="climate" dt-title="Climate"></div>\n            <div dngDtColumnDirective dt-data="terrain" dt-title="Terrain"></div>\n            <div dngDtColumnDirective dt-data="population" dt-title="Population"></div>\n            <div dngDtColumnDirective dt-title="Species" dt-render="species"></div>\n        </dng-dt>\n    </div>\n</div>\n'},695:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(19),o=n(49),r=n(669),s=function(){function e(e,t){this.api=e,this.route=t,this.speciesDetails=this.api.getSpeciesDetail(this.route.snapshot.params.id).catch(function(){return o.Observable.of({})})}return e=__decorate([i.Component({selector:"dng-species-detail",template:n(696)}),__metadata("design:paramtypes",[r.StarWarsApiService,a.ActivatedRoute])],e)}();t.SpeciesDetailComponent=s},696:function(e,t){e.exports='<div class="container">\n    <ng-template #loading>\n        <dng-spinner scale=0.5 type="spinner-2" class="justify-content">\n            <div class="text-center">Loading...</div>\n        </dng-spinner>\n    </ng-template>\n\n    <ng-template #noData></ng-template>\n\n    <div *ngIf="speciesDetails | async as data; else loading">\n        <ng-container *ngIf="data?.name; else noData">\n            <h2 class="mt-0 mb-1">Species: {{ data.name }} </h2>\n\n            <ul class="list-unstyled">\n                <li class="media mt-2 mb-2">\n                    <div class="media-body">\n                        <h5 class="mt-0 mb-1 font-weight-bold pb-2">Name</h5>\n                        {{ data.name }}\n                    </div>\n                </li>\n                <li class="media mt-2 mb-2">\n                    <div class="media-body">\n                        <h5 class="mt-0 mb-1 font-weight-bold pb-2">Homeworld</h5>\n                        {{ data.planet.name }}\n                    </div>\n                </li>\n                <li class="media mt-2 mb-2">\n                    <div class="media-body">\n                        <h5 class="mt-0 mb-1 font-weight-bold pb-2">Classification</h5>\n                        {{ data.classification }}\n                    </div>\n                </li>\n                <li class="media mt-2 mb-2">\n                    <div class="media-body">\n                        <h5 class="mt-0 mb-1 font-weight-bold pb-2">Language</h5>\n                        {{ data.language }}\n                    </div>\n                </li>\n            </ul>\n        </ng-container>\n    </div>\n</div>\n'},697:function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(674)),i(n(675))},698:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.api=e,this.tableOptions={ajax:function(e,n){t.ajax(e,n)}}}return e.prototype.ajax=function(e,t){this.api.getData(!0,"countries",e,t)},e}();t.WorldBankBaseComponent=i},699:function(e,t){e.exports='<dng-dt dt-server-side="true" dt-length-menu="10,50,100" dt-searching="false" dt-ordering="false" [tableOptions]="tableOptions">\n    <div dngDtColumnDirective dt-data="name" dt-title="Name"></div>\n    <div dngDtColumnDirective dt-data="iso2Code" dt-title="Code"></div>\n    <div dngDtColumnDirective dt-data="capitalCity" dt-title="Capital"></div>\n    <div dngDtColumnDirective dt-data="region.value" dt-title="Region"></div>\n    <div dngDtColumnDirective dt-data="incomeLevel.value" dt-title="Income Level"></div>\n    <div dngDtColumnDirective dt-data="lendingType.value" dt-title="Lending Type"></div>\n</dng-dt>\n'},700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(48),a=n(673),o=n(303),r=n(306);t.STARWARSROUTE={path:r.STARWARSROUTES.url,component:o.AppEmptyViewComponent,data:{config:i.RouteManager.getConfig(r.STARWARSROUTES.name)},children:function(e){var t=e.species;return[{path:e.planets.url,component:a.PlanetsComponent,data:{config:i.RouteManager.getConfig(e.planets.name)}},{path:t.url,component:o.AppEmptyViewComponent,data:{config:i.RouteManager.getConfig(t.name)},children:[{path:t.children.detail.url,component:a.SpeciesDetailComponent,data:{config:i.RouteManager.getConfig(t.children.detail.name)}}]}]}(r.STARWARSROUTES.children)}},701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(48),a=n(303),o=n(307),r=n(674);t.WORLDBANKROUTE={path:o.WORLDBANKROUTES.url,component:a.AppEmptyViewComponent,data:{config:i.RouteManager.getConfig(o.WORLDBANKROUTES.name)},children:function(e){return[{path:e.countries.url,component:r.CountriesComponent,data:{config:i.RouteManager.getConfig(e.countries.name)}},{path:e.gdp.url,component:a.AppEmptyViewComponent,data:{config:i.RouteManager.getConfig(e.gdp.name)}}]}(o.WORLDBANKROUTES.children)}}});
//# sourceMappingURL=2.9d99ead63827c8b9dd27.chunk.js.map